## Fichero con la batería de peticiones-respuesta.
## Una petición-respuesta contiene:
##   - Petición, linea que comienza por 'P:' (obligatoria)
##   - Cabeceras, líneas que comienzan por 'C:' (opcionales)
##   -Cuerpo, empieza con la línea 'B:num' , donde num es el tamaño
##   del cuerpo de la petición. Los siguientes num caracteres serán
##   leídos y tomados como parte del cuerpo de la petición. (opcional)
##   - Respuesta, línea que comienza por 'R:'. Es la respuesta esperada
##   para esa petición (obligatoria).
## Las líneas en blanco son ignoradas, los comentarios han de ponerse en
## líneas que comiencen por '##'.
## No hay pruebas para la multitarea.
## Pasa las peticiones PUT, hay que comprobar los contenidos dejados en los ficheros
## guardados.

## ATENCIÓN!!!
## Para poder pasar estas pruebas, suponemos que el servidor sirve dos dominios
## (especificados ambos en server_config/local_domains), que son:
## www.localdomain.org
## www.localdomain2.org
## 
## Al ser www.localdomain.org el primero, es el dominio por defecto. Este dominio
## contendrá dos ficheros:
## default (que sólo contendrá el texto 'hola que tal')
## form.hmtl (el formulario para acceder al .cgi de la práctica 5)
## En www.localdomain2.org habrá un solo un fichero:
## default2 (que sólo contendrá 'este es el contenido de www.localdomain2.org/default2')
##

## HTTP 1.0 ##
## 1 **** Verificación de que sirve petitiones GET
P:GET /default HTTP/1.0
R:HTTP/1.0 200 OK
## 2 **** Verificación de que sirve petitiones GET al dominio local
P:GET http://www.localdomain.org/default HTTP/1.0
R:HTTP/1.0 200 OK
## 3 **** Verificación de que sirve peticiones HEAD
P:HEAD /default HTTP/1.0
R:HTTP/1.0 200 OK
## 4 **** Verificación de que no sirve métodos 'extraños'
P:GEAT /default HTTP/1.0
R:HTTP/1.0 501 Not Implemented
## 5 **** Verificación de que no sirve peticiones de protocolo desconocido
P:GET /default HTTP/1.3
R:HTTP/1.0 400 Bad Request
## 6 **** Verificación del mensaje para ficheros no existentes
P:GET /no_existe HTTP/1.0
R:HTTP/1.0 404 Not Found
## 7 **** Verificación de que sirve peticiones proxy
P:GET http://www.google.com/ HTTP/1.0
R:HTTP/1.0 302 Found
## 8 **** Verificación del análisis de cabeceras
P:GET http://www.dominiodefecto.org HTTP/1.0
C:Hostwww.dominiodefecto.org
R:HTTP/1.0 400 Bad Request
## 9 **** Verificación de la cabecera Connection
P:GET /default HTTP/1.0
C:Connection: Keep-Alive
KEEP-CONNECTED
R:HTTP/1.0 200 OK
## 10 **** Verificación de la cabecera Connection
P:GET /default HTTP/1.0
C:Connection: Close
R:HTTP/1.0 200 OK

## HTTP 1.1 ##
## 11 **** Verificación de que sirve peticiones GET
P:GET /default HTTP/1.1
C:Host: www.localdomain.org
KEEP-CONNECTED
R:HTTP/1.1 200 OK
## 12 **** Verificación de que sirve peticiones HEAD
P:HEAD /default HTTP/1.1
C:Host: www.localdomain.org
KEEP-CONNECTED
R:HTTP/1.1 200 OK
## 13 **** Verificación de que no sirve métodos 'extraños'
P:GEAT /default HTTP/1.1
C:Host: www.localdomain.org
KEEP-CONNECTED
R:HTTP/1.1 501 Not Implemented
## 14 **** Verificación del mensaje para ficheros no existentes
P:GET /no_existe HTTP/1.1
C:Host: www.localdomain.org
KEEP-CONNECTED
R:HTTP/1.1 404 Not Found
## 15 **** Verificación de que se cierra la conexión en la 5 petición
P:GET /default HTTP/1.1
C:Host: www.localdomain.org
R:HTTP/1.1 200 OK
## 16 **** Verificación de que se sirven peticiones proxy
P:GET http://www.google.com HTTP/1.1
C:Host: www.google.com
KEEP-CONNECTED
R:HTTP/1.1 302 Found
## 17 **** Verificación de que se sirven peticiones proxy (y 2)
P:GET http://www.google.com/no_existe HTTP/1.1
C:Host: www.google.com
KEEP-CONNECTED
R:HTTP/1.1 404 Not Found
## 18 **** Verificación de que se comprueba la cabecera host
P:GET /default HTTP/1.1
R:HTTP/1.1 400 Bad Request
## 19 **** Verificación de que se compara la cabecera host con el URI
P:GET http://www.anydomain.org/default HTTP/1.1
C:Host: www.localdomain.org
C:Connection: Close
R:HTTP/1.1 404 Not Found
## 20 **** Idem, además debe de cerrarse la conexión por ser la 5 petición
P:GET http://www.localdomain.org/default HTTP/1.1
C:Host: www.localdomain.org
C:Connection: Close
R:HTTP/1.1 200 OK
## 21 **** Verificación de la cabecera Connection: Close
P:GET /default HTTP/1.1
C:Host: www.localdomain.org
C:Connection: Close
R:HTTP/1.1 200 OK
## 22 **** Verificación de la cabecera Connection: Close en una petición proxy
P:GET http://gsyc.escet.urjc.es/ HTTP/1.1
C:Host: gsyc.escet.urjc.es
C:Connection: Close
R:HTTP/1.1 200 OK

## cgi-bin, POST
## 23 **** Verificación de POST (cojo el formulario, aunque no es necesario)
P:GET /form.html HTTP/1.1
C:Host: www.localdomain.org
KEEP-CONNECTED
R:HTTP/1.1 200 OK
## 24 **** Segunda etapa, llamada a POST
P:POST http://www.localdomain.org/cgi-bin/post_form.cgi HTTP/1.1
C:Host: www.localdomain.org
C:Connection: Close
C:Content-Length: 17
B:17
op1=1&op2=2&op3=3
R:HTTP/1.1 200 OK
## 25 **** POST sin acudir al dir /cgi-bin
P:POST http://www.localdomain.org/post_form.cgi HTTP/1.1
C:Host: www.localdomain.org
C:Content-Length: 17
KEEP-CONNECTED
R:HTTP/1.1 403 Forbidden


## Dominios ##
## 26 **** Verificación de que se sirve el dominio www.localdomain2.org
P:GET http://www.localdomain2.org/default2 HTTP/1.1
C:Host: www.localdomain2.org
KEEP-CONNECTED
R:HTTP/1.1 200 OK
## 27 **** Idem, pero de un fichero que no existe y cerrando la conexión
P:GET http://www.localdomain2.org/no_existe HTTP/1.1
C:Host: www.localdomain2.org
C:Connection: Close
R:HTTP/1.1 404 Not Found
## 28 **** Idem, manteniendo la conexión en HTTP/1.0. También mandamos la cabecera Host.
P:GET http://www.localdomain2.org/no_existe HTTP/1.0
C:Host: www.localdomain2.org
C:Connection: Keep-Alive
KEEP-CONNECTED
R:HTTP/1.0 404 Not Found
## 29 **** Dominios distintos y locales. Se manda campo Keep-Alive, aunque sea redundante.
P:GET http://www.localdomain2.org/default2 HTTP/1.1
C:Host: www.localdomain.org
C:Connection: Keep-Alive
KEEP-CONNECTED
R:HTTP/1.1 200 OK
## 30 **** Idem, pero cerrando la conexión.
P:GET http://www.localdomain2.org/default2 HTTP/1.1
C:Host: www.localdomain.org
C:Connection: Close
R:HTTP/1.1 200 OK


## Proxy para HTTP/1.0
## 31 La respuesta es HTTP/1.1 porque así la devuelve el servidor de gsyc.
P:GET http://gsyc.escet.urjc.es/ HTTP/1.0
C:Connection: Keep-Alive
KEEP-CONNECTED
R:HTTP/1.1 200 OK
## 32 La respuesta es HTTP/1.1 porque así la devuelve el servidor de gsyc.
P:GET http://gsyc.escet.urjc.es/no_existe HTTP/1.0
R:HTTP/1.1 404 Not Found

